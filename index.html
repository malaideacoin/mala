<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MalaIdeaCoin (MALA) - ¡Celebra las peores ideas!</title>
  <!-- Favicon -->
  <link rel="icon" href="images/favicon.ico">
  <!-- Meta tags para SEO y Open Graph -->
  <meta name="description" content="MalaIdeaCoin (MALA) celebra las peores ideas, transformándolas en el motor de una comunidad creativa y divertida. Únete a la revolución de las malas ideas!">
  <meta name="keywords" content="MalaIdeaCoin, MALA, meme coin, cripto, blockchain, humor, creatividad">
  <meta name="author" content="Tu Nombre o Empresa">
  <meta property="og:title" content="MalaIdeaCoin (MALA) - ¡Celebra las peores ideas!">
  <meta property="og:description" content="MalaIdeaCoin celebra las peores ideas y fomenta una comunidad creativa y divertida. ¡Únete a la revolución de las malas ideas!">
  <meta property="og:image" content="images/malaideacoin.png">
  <meta property="og:url" content="https://tu-dominio.com">
  <meta name="twitter:card" content="summary_large_image">
  <!-- Google Fonts: Montserrat, Luckiest Guy y Poppins -->
  <link href="https://fonts.googleapis.com/css2?family=Luckiest+Guy&family=Montserrat:wght@400;700&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <!-- Font Awesome para iconos sociales -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- Incluir Solana Web3.js -->
  <script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.js"></script>
  <!-- Aquí puedes incluir tu código de Google Analytics si lo deseas -->
  <style>
    /* Preloader */
    #preloader {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: #000;
      z-index: 9999;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .spinner {
      border: 8px solid #333;
      border-top: 8px solid var(--accent-color);
      border-radius: 50%;
      width: 60px;
      height: 60px;
      animation: spin 1s linear infinite;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    /* Variables de tema */
    :root {
      --accent-color: #e63946;
      --accent-hover: #b32d39;
      --card-bg: rgba(26, 26, 26, 0.85);
      --navbar-bg: rgba(0, 0, 0, 0.85);
      --text-color: #ccc;
      --glass-blur: 8px;
    }
    body.light-mode {
      --accent-color: #0077cc;
      --accent-hover: #005fa3;
      --card-bg: rgba(245, 245, 245, 0.95);
      --navbar-bg: rgba(255, 255, 255, 0.95);
      --text-color: #333;
    }
    
    /* Estilos base y tipografías */
    body, html {
      margin: 0;
      padding: 0;
      font-family: 'Montserrat', sans-serif;
      color: var(--text-color);
      scroll-behavior: smooth;
      line-height: 1.6;
      overflow-x: hidden;
    }
    
    /* Fondo completo: imagen de fondo fija */
    body {
      background: url("images/malaideacoin.png") no-repeat center center fixed;
      background-size: cover;
    }
    /* Overlay global para mejorar legibilidad */
    body::before {
      content: "";
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      z-index: -1;
    }
    
    /* Animaciones */
    @keyframes fadeSlideIn {
      0% { opacity: 0; transform: translateY(-20px); }
      100% { opacity: 1; transform: translateY(0); }
    }
    @keyframes fadeInUp {
      0% { opacity: 0; transform: translateY(20px); }
      100% { opacity: 1; transform: translateY(0); }
    }
    
    /* Navbar */
    nav {
      background: var(--navbar-bg);
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.7);
      position: sticky;
      top: 0;
      z-index: 100;
    }
    nav .nav-container {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 20px;
    }
    nav .logo {
      font-size: 1.5em;
      font-weight: bold;
      color: var(--accent-color);
    }
    nav ul {
      list-style: none;
      display: flex;
      gap: 20px;
      align-items: center;
    }
    nav ul li a {
      text-decoration: none;
      color: var(--text-color);
      font-weight: bold;
      transition: color 0.3s, transform 0.3s;
    }
    nav ul li a:hover {
      color: var(--accent-color);
      transform: scale(1.05);
    }
    nav .theme-toggle, nav .wallet-toggle {
      background: var(--accent-color);
      border: none;
      color: #fff;
      padding: 8px 12px;
      border-radius: 5px;
      cursor: pointer;
      transition: background 0.3s;
    }
    nav .theme-toggle:hover, nav .wallet-toggle:hover {
      background: var(--accent-hover);
    }
    
    /* Header (Hero) */
    header {
      position: relative;
      height: 500px;
      text-align: center;
      color: #fff;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: 0 20px;
      transition: transform 0.2s ease-out;
    }
    /* Overlay en el header */
    header::after {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.6);
      z-index: -1;
    }
    header h1 {
      font-family: 'Luckiest Guy', cursive;
      font-size: 4rem;
      margin: 0;
      text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.8);
      animation: fadeSlideIn 2s ease-out;
    }
    header p {
      font-size: 1.5rem;
      margin-top: 20px;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
      animation: fadeSlideIn 2s ease-out 0.5s forwards;
    }
    .cta-buttons {
      margin-top: 30px;
      display: flex;
      justify-content: center;
      gap: 20px;
      flex-wrap: wrap;
    }
    .cta-buttons a {
      background: var(--accent-color);
      color: #fff;
      padding: 15px 30px;
      border-radius: 50px;
      text-decoration: none;
      font-weight: bold;
      transition: background 0.3s, transform 0.3s;
    }
    .cta-buttons a:hover {
      background: var(--accent-hover);
      transform: scale(1.05);
    }
    
    /* Sección Contador: Cuenta Regresiva de 7 Días */
    #countdownSection {
      background: rgba(0, 0, 0, 0.7);
      padding: 20px;
      margin: 20px auto;
      max-width: 800px;
      text-align: center;
      border: 2px solid var(--accent-color);
      border-radius: 10px;
      box-shadow: 0 2px 16px rgba(0, 0, 0, 0.8);
      font-family: 'Montserrat', sans-serif;
      color: #fff;
    }
    #countdownSection h2 {
      margin: 0;
      font-size: 2rem;
      animation: fadeInUp 1s ease-out;
    }
    #countdownTimer {
      font-size: 1.5em;
      margin-top: 10px;
      animation: fadeInUp 1s ease-out;
    }
    
    /* Sección Historia */
    .story-section {
      background: linear-gradient(135deg, rgba(255,65,108,0.4), rgba(35,214,171,0.4));
      border: 2px solid var(--accent-color);
      border-radius: 10px;
      padding: 20px;
      margin: 20px auto;
      max-width: 800px;
      text-align: center;
      font-family: 'Poppins', sans-serif;
      color: #fff;
      text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.8);
      transition: transform 0.3s, box-shadow 0.3s;
    }
    .story-section:hover {
      transform: scale(1.02);
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
    }
    .story-section h2 {
      font-family: 'Luckiest Guy', cursive;
      color: var(--accent-color);
      margin-bottom: 10px;
    }
    .story-section p {
      font-size: 1.1em;
    }
    
    /* Sección Nuestro Equipo (sin fotos) */
    #team {
      background: var(--card-bg);
      backdrop-filter: blur(var(--glass-blur));
      padding: 30px;
      margin: 20px auto;
      max-width: 800px;
      border-radius: 10px;
      box-shadow: 0 2px 16px rgba(0, 0, 0, 0.8);
      text-align: center;
      animation: fadeInUp 1s ease-out;
    }
    #team h2 {
      font-family: 'Luckiest Guy', cursive;
      color: var(--accent-color);
      margin-bottom: 20px;
    }
    .team-members {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
    }
    .team-card {
      background: rgba(0, 0, 0, 0.6);
      padding: 20px;
      border-radius: 10px;
      color: #fff;
      transition: transform 0.3s, box-shadow 0.3s;
    }
    .team-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.9);
    }
    /* Avatar sin imagen: mostramos las iniciales en un círculo */
    .team-avatar {
      width: 80px;
      height: 80px;
      margin: 0 auto 10px;
      border-radius: 50%;
      background: var(--accent-color);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      font-weight: bold;
      color: #fff;
    }
    .team-card h3 {
      margin: 10px 0 5px;
      font-family: 'Luckiest Guy', cursive;
    }
    .team-card p {
      margin: 0;
      font-size: 0.9em;
    }
    
    /* Secciones con efecto glassmorphism */
    .dashboard,
    .market-info,
    .roadmap,
    .tokenomics,
    .idea-of-day,
    .form-container {
      background: var(--card-bg);
      backdrop-filter: blur(var(--glass-blur));
      box-shadow: 0 2px 16px rgba(0, 0, 0, 0.8);
      border-radius: 10px;
      padding: 20px;
      margin: 20px auto;
      max-width: 800px;
      text-align: center;
      animation: fadeInUp 1s ease-out;
    }
    .dashboard h2,
    .market-info h2,
    .roadmap h2,
    .tokenomics h2,
    .idea-of-day h2,
    .form-container h2 {
      margin-bottom: 10px;
      color: var(--accent-color);
      font-family: 'Luckiest Guy', cursive;
    }
    
    /* Sección Tokenomics */
    .tokenomics p, .tokenomics ul {
      font-size: 1.1em;
      text-align: left;
      margin-top: 10px;
    }
    .tokenomics ul {
      list-style: disc;
      margin-left: 20px;
    }
    .tokenomics li {
      margin-bottom: 8px;
    }
    
    /* Controles de búsqueda y orden */
    .controls {
      max-width: 800px;
      margin: 20px auto;
      display: flex;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 10px;
    }
    .controls input[type="text"],
    .controls select {
      padding: 10px;
      border: 1px solid #444;
      border-radius: 5px;
      background: var(--card-bg);
      color: var(--text-color);
    }
    .controls input[type="text"] { width: 60%; }
    
    /* Sección Ideas Propuestas */
    .ideas-section {
      margin-top: 40px;
    }
    .ideas-section h2 {
      text-align: center;
      margin-bottom: 30px;
      color: var(--accent-color);
      font-family: 'Luckiest Guy', cursive;
      animation: fadeInUp 1s ease-out;
    }
    .idea-card {
      background: var(--card-bg);
      backdrop-filter: blur(var(--glass-blur));
      padding: 20px;
      margin: 15px auto;
      max-width: 800px;
      border-radius: 10px;
      box-shadow: 0 2px 16px rgba(0, 0, 0, 0.8);
      transition: transform 0.3s, box-shadow 0.3s;
      position: relative;
      animation: fadeInUp 0.8s ease-out;
    }
    .idea-card:hover {
      transform: translateY(-5px) rotateX(2deg);
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.9);
    }
    .idea-card p {
      margin: 10px 0;
    }
    .vote-button, .share-button, .comment-button {
      background: var(--accent-color);
      border: none;
      color: white;
      padding: 8px 12px;
      border-radius: 5px;
      cursor: pointer;
      transition: background 0.3s;
      margin-right: 5px;
    }
    .vote-button:hover, .share-button:hover, .comment-button:hover {
      background: var(--accent-hover);
    }
    .comments-section {
      margin-top: 10px;
      border-top: 1px solid #444;
      padding-top: 10px;
      display: none;
    }
    .comments-section ul {
      list-style: none;
      padding-left: 0;
    }
    .comments-section li {
      margin-bottom: 5px;
      font-size: 0.9em;
      color: #aaa;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .comments-section li span {
      flex-grow: 1;
    }
    .comments-section li button.delete-comment {
      background: transparent;
      border: none;
      color: var(--accent-color);
      cursor: pointer;
      font-size: 0.9em;
    }
    .comments-section input[type="text"] {
      padding: 8px;
      border: 1px solid #444;
      border-radius: 5px;
      width: calc(100% - 100px);
      margin-right: 5px;
      background: var(--card-bg);
      color: var(--text-color);
    }
    .comments-section button.send-comment {
      padding: 8px 12px;
      border: none;
      border-radius: 5px;
      background: var(--accent-color);
      color: white;
      cursor: pointer;
      transition: background 0.3s;
    }
    .comments-section button.send-comment:hover {
      background: var(--accent-hover);
    }
    
    /* Formulario para proponer ideas */
    .form-container {
      background: var(--card-bg);
      backdrop-filter: blur(var(--glass-blur));
      padding: 30px;
      margin: 40px auto;
      max-width: 800px;
      border-radius: 10px;
      box-shadow: 0 2px 16px rgba(0, 0, 0, 0.8);
      animation: fadeInUp 1s ease-out;
    }
    .form-container h2 {
      text-align: center;
      margin-bottom: 20px;
      color: var(--accent-color);
      font-family: 'Luckiest Guy', cursive;
    }
    .form-container form {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }
    .form-container input[type="text"],
    .form-container textarea {
      padding: 15px;
      border: 1px solid #444;
      border-radius: 5px;
      font-size: 1em;
      width: 100%;
      background: var(--card-bg);
      color: var(--text-color);
    }
    .form-container input[type="submit"] {
      background: var(--accent-color);
      color: white;
      padding: 15px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-weight: bold;
      font-size: 1.1em;
      transition: background 0.3s;
    }
    .form-container input[type="submit"]:hover {
      background: var(--accent-hover);
    }
    
    /* Footer */
    footer {
      background: #000;
      color: #777;
      text-align: center;
      padding: 20px;
      font-size: 0.9em;
    }
    footer .social-links {
      margin-top: 10px;
    }
    footer .social-links a {
      color: var(--text-color);
      font-size: 1.5rem;
      margin: 0 10px;
      transition: color 0.3s;
    }
    footer .social-links a:hover {
      color: var(--accent-color);
    }
    footer .newsletter {
      margin-top: 20px;
    }
    footer .newsletter form {
      display: flex;
      justify-content: center;
      gap: 10px;
    }
    footer .newsletter input[type="email"] {
      padding: 10px;
      border: 1px solid #444;
      border-radius: 5px;
    }
    footer .newsletter button {
      background: var(--accent-color);
      color: #fff;
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
      transition: background 0.3s;
    }
    footer .newsletter button:hover {
      background: var(--accent-hover);
    }
    
    /* Botón Volver al Inicio */
    #backToTop {
      position: fixed;
      bottom: 30px;
      left: 30px;
      background: var(--accent-color);
      color: white;
      padding: 10px 15px;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      opacity: 0;
      transition: opacity 0.3s;
      z-index: 200;
    }
    
    /* Toast Notificaciones */
    #toast {
      position: fixed;
      bottom: 30px;
      right: 30px;
      background: var(--accent-color);
      color: white;
      padding: 15px 20px;
      border-radius: 5px;
      opacity: 0;
      transition: opacity 0.5s;
      z-index: 200;
    }
    
    /* Responsividad */
    @media (max-width: 768px) {
      header h1 { font-size: 2.8rem; }
      header p { font-size: 1.1rem; }
      nav .nav-container { flex-direction: column; }
      nav ul { flex-direction: column; gap: 10px; }
      .controls input[type="text"] { width: 100%; }
    }
  </style>
</head>
<body>
  <!-- Preloader -->
  <div id="preloader">
    <div class="spinner"></div>
  </div>

  <!-- Navbar -->
  <nav>
    <div class="nav-container">
      <div class="logo">MalaIdeaCoin</div>
      <ul>
        <li><a href="#home">Inicio</a></li>
        <li><a href="#proponer">Proponer</a></li>
        <li><a href="#votar">Votar</a></li>
        <li><button class="theme-toggle" id="themeToggle">Toggle Theme</button></li>
        <li><button class="wallet-toggle" id="connectWallet">Conectar Wallet</button></li>
      </ul>
    </div>
  </nav>

  <!-- Header (Hero) -->
  <header id="home">
    <h1>MalaIdeaCoin (MALA)</h1>
    <p>¡Celebra las peores ideas y gana tokens!</p>
    <div class="cta-buttons">
      <a href="#proponer">Proponer Idea</a>
      <a href="#votar">Votar Ideas</a>
    </div>
  </header>
  
  <!-- Sección Contador: Cuenta Regresiva de 7 Días -->
  <section id="countdownSection">
    <h2>Cuenta Regresiva para el Lanzamiento</h2>
    <div id="countdownTimer">Cargando...</div>
  </section>

  <!-- Sección Historia -->
  <section class="story-section" id="story">
    <h2>¿Qué es MalaIdeaCoin?</h2>
    <p>
      MalaIdeaCoin (MALA) celebra las peores ideas, transformándolas en el motor de una comunidad creativa y divertida. Inspirado en el humor y la ironía, este token demuestra que hasta las ideas más “malas” pueden convertirse en una fuente de inspiración y entretenimiento. ¡Únete a la revolución de las malas ideas y sé parte de esta experiencia única!
    </p>
  </section>

  <!-- Sección Nuestro Equipo (sin fotos) -->
  <section id="team">
    <h2>Nuestro Equipo</h2>
    <div class="team-members">
      <div class="team-card">
        <div class="team-avatar">JP</div>
        <h3>Juan Pérez</h3>
        <p>CEO & Fundador</p>
      </div>
      <div class="team-card">
        <div class="team-avatar">MG</div>
        <h3>María García</h3>
        <p>CTO</p>
      </div>
      <div class="team-card">
        <div class="team-avatar">LM</div>
        <h3>Luis Martínez</h3>
        <p>Marketing</p>
      </div>
    </div>
  </section>

  <!-- Main Content -->
  <main>
    <!-- Información de Mercado -->
    <section class="market-info" id="marketInfo">
      <h2>Información de Mercado</h2>
      <p id="priceInfo">Precio de SOL: $--</p>
    </section>
    
    <!-- Dashboard -->
    <section class="dashboard" id="dashboard">
      <h2>Dashboard</h2>
      <p id="walletAddress">Wallet: No conectada</p>
      <p id="walletBalance">Balance: $0 SOL</p>
    </section>

    <!-- Idea del Día -->
    <section class="idea-of-day" id="ideaDelDia">
      <h2>Idea del Día</h2>
      <p id="ideaDiaTexto"><strong>Idea:</strong> Cargando...</p>
      <p id="ideaDiaVotos"><strong>Votos:</strong> 0</p>
    </section>
    
    <!-- Roadmap -->
    <section class="roadmap" id="roadmap">
      <h2>Roadmap</h2>
      <ul>
        <li><strong>Fase 1:</strong> Lanzamiento oficial de la web y del token MALA.</li>
        <li><strong>Fase 2:</strong> Implementación de votaciones on-chain y conexión con pum.fun.</li>
        <li><strong>Fase 3:</strong> Integración de funciones avanzadas como comentarios y recompensas.</li>
        <li><strong>Fase 4:</strong> Expansión de la comunidad y establecimiento de alianzas estratégicas.</li>
        <li><strong>Fase 5:</strong> Implementación de nuevas funcionalidades (staking, DAO, etc.) y mejoras globales.</li>
      </ul>
    </section>
    
    <!-- Tokenomics -->
    <section class="tokenomics" id="tokenomics">
      <h2>Tokenomics</h2>
      <p><strong>Supply Total:</strong> 1,000,000,000 MALA</p>
      <ul>
        <li>La mayor parte del suministro se distribuirá directamente a la comunidad para incentivar la participación activa y recompensar la contribución.</li>
        <li>Todos los tokens se lanzarán exclusivamente en pum.fun, sin realizar ventas privadas.</li>
        <li>Se asignarán tokens para impulsar campañas de marketing y el crecimiento del ecosistema.</li>
        <li>También se reservarán tokens para garantizar liquidez y estabilidad en el mercado.</li>
        <li>Una cantidad limitada se destinará al equipo y asesores para impulsar el desarrollo continuo.</li>
      </ul>
    </section>
    
    <!-- Controles de búsqueda y orden -->
    <div class="controls">
      <input type="text" id="searchInput" placeholder="Buscar ideas...">
      <select id="sortSelect">
        <option value="desc">Más votadas</option>
        <option value="asc">Menos votadas</option>
      </select>
    </div>

    <!-- Sección Ideas Propuestas -->
    <section class="ideas-section" id="votar">
      <h2>Ideas Propuestas</h2>
      <div id="ideasContainer">
        <!-- Tarjetas de ideas generadas dinámicamente -->
      </div>
    </section>
    
    <!-- Formulario para Proponer Ideas -->
    <section class="form-container" id="proponer">
      <h2>Proponer una Mala Idea</h2>
      <form id="ideaForm">
        <input type="text" id="ideaTitle" placeholder="Título de la idea" required>
        <textarea id="ideaDescription" placeholder="Descripción de la idea" rows="4" required></textarea>
        <input type="submit" value="Enviar Idea">
      </form>
    </section>
  </main>

  <!-- Botón Volver al Inicio -->
  <button id="backToTop">↑</button>

  <!-- Toast Notificaciones -->
  <div id="toast"></div>

  <!-- Footer -->
  <footer>
    <p>&copy; 2025 MalaIdeaCoin. Todos los derechos reservados.</p>
    <div class="social-links">
      <a href="mailto:malaideacoin@gmail.com" target="_blank" aria-label="Email"><i class="fa-solid fa-envelope"></i></a>
      <a href="https://t.me/+ET-lS3L3IlM0Yzgx" target="_blank" aria-label="Telegram"><i class="fab fa-telegram"></i></a>
      <a href="https://x.com/malaideaco75556" target="_blank" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
      <a href="https://discord.gg/Qzp8m49n" target="_blank" aria-label="Discord"><i class="fab fa-discord"></i></a>
    </div>
    <div class="newsletter">
      <p>Suscríbete a nuestro newsletter:</p>
      <form id="newsletterForm">
        <input type="email" placeholder="Tu correo electrónico" required>
        <button type="submit">Suscribirse</button>
      </form>
    </div>
  </footer>

  <script>
    /* Preloader: ocultar cuando la página esté cargada */
    window.addEventListener("load", function() {
      const preloader = document.getElementById("preloader");
      preloader.style.transition = "opacity 0.5s ease";
      preloader.style.opacity = "0";
      setTimeout(() => { preloader.style.display = "none"; }, 500);
    });

    /* Efecto parallax en el header basado en el movimiento del mouse */
    document.addEventListener("mousemove", function(e) {
      const header = document.querySelector("header");
      const xPos = (e.clientX / window.innerWidth - 0.5) * 20;
      const yPos = (e.clientY / window.innerHeight - 0.5) * 20;
      header.style.transform = "translate(" + xPos + "px, " + yPos + "px)";
    });

    /* Función para mostrar notificaciones tipo toast */
    function showToast(message) {
      const toast = document.getElementById("toast");
      toast.textContent = message;
      toast.style.opacity = 1;
      setTimeout(() => { toast.style.opacity = 0; }, 3000);
    }

    /* Modo Claro/Oscuro */
    function loadTheme() {
      const savedTheme = localStorage.getItem("theme");
      if (savedTheme === "light") {
        document.body.classList.add("light-mode");
      } else {
        document.body.classList.remove("light-mode");
      }
    }
    function toggleTheme() {
      document.body.classList.toggle("light-mode");
      localStorage.setItem("theme", document.body.classList.contains("light-mode") ? "light" : "dark");
    }
    document.getElementById("themeToggle").addEventListener("click", toggleTheme);
    loadTheme();

    /* Botón Volver al Inicio */
    const backToTopBtn = document.getElementById("backToTop");
    window.addEventListener("scroll", () => {
      backToTopBtn.style.opacity = window.scrollY > 300 ? 1 : 0;
    });
    backToTopBtn.addEventListener("click", () => {
      window.scrollTo({ top: 0, behavior: "smooth" });
    });

    /* Obtener el precio de SOL desde CoinGecko */
    function fetchPriceInfo() {
      fetch("https://api.coingecko.com/api/v3/simple/price?ids=solana&vs_currencies=usd")
        .then(response => response.json())
        .then(data => {
          const price = data.solana ? data.solana.usd : "N/A";
          document.getElementById("priceInfo").innerHTML = `<strong>Precio de SOL:</strong> $${price}`;
        })
        .catch(err => {
          document.getElementById("priceInfo").innerHTML = `<strong>Precio de SOL:</strong> Error al cargar`;
          console.error(err);
        });
    }

    /* Conectar wallet usando Solana Web3.js y obtener balance con Solscan */
    const SOLANA_API_URL = "https://public-api.solscan.io/account/";
    async function connectWallet() {
      if (window.solana && window.solana.isPhantom) {
        try {
          const resp = await window.solana.connect();
          const publicKey = resp.publicKey.toString();
          document.getElementById("walletAddress").textContent = "Wallet: " + publicKey;
          fetch(SOLANA_API_URL + publicKey)
            .then(response => response.json())
            .then(data => {
              const lamports = data.lamports || 0;
              const sol = lamports / 1000000000;
              document.getElementById("walletBalance").textContent = "Balance: " + sol.toFixed(2) + " SOL";
            })
            .catch(err => {
              console.error(err);
              showToast("Error al obtener el balance de Solana");
            });
          showToast("Wallet conectada: " + publicKey);
        } catch (err) {
          console.error(err);
          showToast("Error al conectar la wallet");
        }
      } else {
        showToast("Por favor, instala Phantom Wallet.");
      }
    }
    document.getElementById("connectWallet").addEventListener("click", connectWallet);

    /* Manejo de ideas y comentarios (localStorage) */
    let sampleIdeas = [
      { id: 1, title: "Un ascensor que cuente chistes malos en cada piso.", votes: 42 },
      { id: 2, title: "Una app que te recuerde cuánto procrastinas.", votes: 37 },
      { id: 3, title: "Una máquina expendedora de malas ideas que nunca funcione correctamente.", votes: 75 },
      { id: 4, title: "Una alarma que suene con el sonido de un bostezo eterno.", votes: 15 }
    ];
    function loadIdeas() {
      const ideasLS = localStorage.getItem("ideas");
      if (ideasLS) {
        sampleIdeas = JSON.parse(ideasLS);
      } else {
        localStorage.setItem("ideas", JSON.stringify(sampleIdeas));
      }
    }
    function saveIdeas() {
      localStorage.setItem("ideas", JSON.stringify(sampleIdeas));
    }

    let comments = {};
    function loadComments() {
      const stored = localStorage.getItem("comments");
      if (stored) {
        comments = JSON.parse(stored);
      }
    }
    function saveComments() {
      localStorage.setItem("comments", JSON.stringify(comments));
    }
    function renderComments(ideaId, commentsContainer) {
      commentsContainer.innerHTML = "";
      const ideaComments = comments[ideaId] || [];
      if (ideaComments.length === 0) {
        commentsContainer.innerHTML = "<p>No hay comentarios aún.</p>";
      } else {
        const ul = document.createElement("ul");
        ideaComments.forEach((comment, index) => {
          const li = document.createElement("li");
          li.innerHTML = `<span>${comment}</span> <button class="delete-comment" data-index="${index}">Eliminar</button>`;
          ul.appendChild(li);
        });
        commentsContainer.appendChild(ul);
        commentsContainer.querySelectorAll(".delete-comment").forEach(btn => {
          btn.addEventListener("click", function() {
            const idx = this.getAttribute("data-index");
            comments[ideaId].splice(idx, 1);
            saveComments();
            renderComments(ideaId, commentsContainer);
            showToast("Comentario eliminado");
          });
        });
      }
    }

    function renderIdeas() {
      const container = document.getElementById("ideasContainer");
      container.innerHTML = "";
      const query = document.getElementById("searchInput").value.toLowerCase();
      let filteredIdeas = sampleIdeas.filter(idea => idea.title.toLowerCase().includes(query));
      const sortOrder = document.getElementById("sortSelect").value;
      filteredIdeas.sort((a, b) => sortOrder === "asc" ? a.votes - b.votes : b.votes - a.votes);
      filteredIdeas.forEach(idea => {
        const card = document.createElement("div");
        card.classList.add("idea-card");
        card.setAttribute("data-id", idea.id);
        card.innerHTML = `
          <p><strong>Idea:</strong> ${idea.title}</p>
          <p><strong>Votos:</strong> <span class="vote-count">${idea.votes}</span></p>
          <button class="vote-button" aria-label="Votar por esta idea">Votar</button>
          <button class="share-button" aria-label="Compartir esta idea">Compartir</button>
          <button class="comment-button" aria-label="Ver comentarios">Comentarios</button>
          <div class="comments-section">
            <div class="existing-comments"></div>
            <div class="comment-form">
              <input type="text" placeholder="Agrega un comentario" aria-label="Agregar comentario">
              <button class="send-comment" aria-label="Enviar comentario">Enviar</button>
            </div>
          </div>
        `;
        card.querySelector(".vote-button").addEventListener("click", function() {
          idea.votes++;
          card.querySelector(".vote-count").textContent = idea.votes;
          card.querySelector(".vote-count").style.color = "#8ef";
          setTimeout(() => { card.querySelector(".vote-count").style.color = "var(--text-color)"; }, 300);
          saveIdeas();
          renderIdeaDelDia();
        });
        card.querySelector(".share-button").addEventListener("click", function() {
          navigator.clipboard.writeText(idea.title)
            .then(() => showToast("Idea copiada al portapapeles"))
            .catch(() => showToast("Error al copiar"));
        });
        const commentBtn = card.querySelector(".comment-button");
        const commentsSection = card.querySelector(".comments-section");
        commentBtn.addEventListener("click", function() {
          if (commentsSection.style.display === "none" || commentsSection.style.display === "") {
            commentsSection.style.display = "block";
            renderComments(idea.id, commentsSection.querySelector(".existing-comments"));
          } else {
            commentsSection.style.display = "none";
          }
        });
        const commentForm = card.querySelector(".comment-form");
        const commentInput = commentForm.querySelector("input");
        const commentSendBtn = commentForm.querySelector(".send-comment");
        commentSendBtn.addEventListener("click", function() {
          const text = commentInput.value.trim();
          if (text === "") {
            showToast("Ingrese un comentario");
            return;
          }
          if (!comments[idea.id]) {
            comments[idea.id] = [];
          }
          comments[idea.id].push(text);
          saveComments();
          renderComments(idea.id, commentsSection.querySelector(".existing-comments"));
          commentInput.value = "";
          showToast("Comentario agregado");
        });
        container.appendChild(card);
      });
    }

    function renderIdeaDelDia() {
      const randomIdea = sampleIdeas[Math.floor(Math.random() * sampleIdeas.length)];
      document.getElementById("ideaDiaTexto").innerHTML = `<strong>Idea:</strong> ${randomIdea.title}`;
      document.getElementById("ideaDiaVotos").innerHTML = `<strong>Votos:</strong> ${randomIdea.votes}`;
    }

    document.getElementById("ideaForm").addEventListener("submit", function(event) {
      event.preventDefault();
      const title = document.getElementById("ideaTitle").value.trim();
      const description = document.getElementById("ideaDescription").value.trim();
      if (!title || !description) {
        showToast("Por favor, completa todos los campos");
        return;
      }
      const fullIdea = title + " - " + description;
      const newIdea = { id: sampleIdeas.length + 1, title: fullIdea, votes: 0 };
      sampleIdeas.push(newIdea);
      saveIdeas();
      renderIdeas();
      showToast("Idea enviada exitosamente");
      event.target.reset();
    });

    document.getElementById("searchInput").addEventListener("keyup", renderIdeas);
    document.getElementById("sortSelect").addEventListener("change", renderIdeas);

    window.addEventListener("load", function() {
      loadIdeas();
      loadComments();
      renderIdeas();
      renderIdeaDelDia();
      fetchPriceInfo();
    });
    
    /* Contador de 7 días para el lanzamiento */
    (function() {
      const countdownElement = document.getElementById("countdownTimer");
      // Duración total: 7 días en milisegundos
      const totalDuration = 7 * 24 * 60 * 60 * 1000;
      const launchTime = new Date().getTime() + totalDuration;
      
      function updateCountdown() {
        const now = new Date().getTime();
        const remaining = launchTime - now;
        if (remaining <= 0) {
          countdownElement.textContent = "¡Lanzado!";
          clearInterval(timerInterval);
          return;
        }
        const days = Math.floor(remaining / (1000 * 60 * 60 * 24));
        const hours = Math.floor((remaining % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((remaining % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((remaining % (1000 * 60)) / 1000);
        countdownElement.textContent = `${days}d ${hours}h ${minutes}m ${seconds}s`;
      }
      const timerInterval = setInterval(updateCountdown, 1000);
      updateCountdown();
    })();
  </script>
</body>
</html>
